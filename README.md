# Chrono-Website

## Purpose of the Assignment

To gain practical skills and knowledge in coding and using PHP server-side embedded scripting to extend the functionality of the website you developed in Part 1, by creating dynamic webpage content, accessing a separate MySQL database server, and using PHP to connect to this MySQL server. </br>

In particular, you will: 
+ Use PHP to include common webpage code (eg. menu, header, footer code)
+ Understand the ways that ‘state’ can be maintained between web pages
+ Use PHP to validate data sent in the “payment” HTML form to a new “process_order.php” page and if any errors, provide user feedback through a new “fix_order.php” form
+ Use PHP to create and store the order data in a server-side MySQL database table “orders”, and provide feedback through a new “receipt.php” page
+ Use PHP to query and update the status of the “orders”, through a new “manager.php” page
+ Understand how using a “settings.php” script, and relative links, can enable the website to be ported from a development environment to a testing environment

## Specified Requirements

### 1. Use PHP to reuse common elements in your website

PHP provides us with techniques to modularise and reuse our web application code. Rewrite your web pages so that the common static HTML elements such as menu, header and footer are written in common text files that are then “included” back into your web pages. Name the include file(s) with an .inc extension, replace the sections of HTML in your main pages with ‘include’ statements, and rename your main pages with a .php extension, so the php includes will be included.

### 2. Create an ‘orders’ database table

Create an ‘orders’ table in your MySQL database. </br>

This table will record the data sent from the “payment.php” form (including the data gathered from “enquire.php”). This data contains information on the customer, product and payment details as specified in the previous assignments. The format of the database fields should match appropriate validation rules defined in assignments Part 1 and 2. If no rule exists for a particular field, choose an appropriate format. </br>

In addition to the fields that record information from the “payment” form, add the following fields with appropriate data-types to the table:

* An auto-generated primary key field called ‘order_id’
* The total cost of the order ‘order_cost’
* Date / time of order (generated by the system) ‘order_time'
* A field called ‘order_status’ </br>

An ‘order status’ can have one of three values: PENDING | FULFILLED | PAID | ARCHIVED. When an order is created its status is always set to PENDING.

**Later, your “process_order.php” page should be able to create this table, if it does not already exist, when the first order is made.** </br>

### 3. Create a file to store your database connection variables “settings.php”

To enable your website to be easily ported to our “testing” environment (and in a workplace, ultimately to a production website platform), use a PHP include file, “settings.php” that contains the **connection variables as shown below**, and use this in your PHP to connect to your MySQL database on the feenix-mariadb database server.

<img width="590" alt="Screenshot 2024-09-05 at 6 34 33 PM" src="https://github.com/user-attachments/assets/82624f17-dc69-4d8e-8612-fbdb99ebc42e">

### 4.Payment “payment.php”

#### 4.1 Create the payment form with price, quantity and credit card information

Extend the enquire form to enable a user to purchase a product/service that they have selected. You can **either** 1) rename the enquire.php to payment.php then add the inputs listed below; or 2) add a new payment.php, make the enquire page submit to payment.php. Then include the inputs listed below in enquire/payment form accordingly. </br>

You will need to:
* Add some **price details** for various items in the product/service range, and add extra
options where applicable.
* Add one or more fields so a user can select the **quantity** of the product/service to be
purchased. For a product, the quantity might represent the number of items. For a service,
the quantity might represent the dates of hire, or the number of days.
Add more form inputs to include **credit card** payment details:
  + Credit card type (e.g. Visa, Mastercard, American Express) – no valid default
selection
  + Name on credit card
  + Credit card number
  + Credit card expiry date (mm-yy)
  + Card verification value (CVV)
* Have a ‘submit’ button with caption ‘Check Out’ </br>

Set the “payment.php” form action to “process_order.php”. When a customer decides to proceed with the order, a **Check Out**  button should submit the form, and all the customer and product information to the server-side script. (So you check that all name-value data has been correctly submitted.)

#### 4.2 Disable HTML validation

While client-side validation using HTML5 was used in previous assignments, in order to preserve the integrity of the server data, server-side data format checking should be implemented. </br>

In this assignment HTML5 form validation will be disabled. </br>

So we can test that server-side validation works correctly:
* Add the **novalidate="novalidate"** (or simply **novalidate**) attribute into your forms, to disable client- side HTML5.

### 5. Processing Orders “process_order.php”

Ensure the “payment.php” form action to “process_order.php”. Having disabled HTML5 form data validation, all form data format checking will now be implemented server-side, using PHP, after the data has been submitted by “payment.php”:
* All values received by “process_order.php” should be sanitized to remove leading and trailing spaces, backslashes and HTML control characters.
* Before an order is written to the **orders** table the data format rules need to be checked. These rules include rules specified in Part 1 (for customer details), rules for credit card (shown below) and other rules you think appropriate:
  + Credit card type must be one of Visa, Mastercard, or American Express
  + Credit cardnumber: exactly 15 or 16 digits. Credit card numbers must be checked against the selected card type according to the following rules:
    * Visa cards have 16 digits and start with a 4
    * Master Card have 16 digits and start with digits 51 through to 55
    * American Express has 15 digits and starts with 34 or 37.

If the input data does not meet format requirements, errors should be returned to “fix_order.php” a form version of the ‘payment’ page, and display all form control fields filled with data entered in enquire page and payment page, and with errors marked or highlighted. Do not fill the Credit Card details, these will need to be re-entered. The “fix_order.php” form should submit back to “process_order.php”, using method post. </br>

***Hint: error msg back to fix_order could be string or an array.*** </br>

If the input data is correctly validated by “process_orders.php”:
















